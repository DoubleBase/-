## 缓存

- 项目中是怎么用缓存的？

  

- 为啥要在项目中使用缓存？

  提高性能，减少对数据库的访问

  

- 用了缓存会有什么不良后果？

  数据库缓存双写不一致，缓存血崩，缓存穿透，缓存并发竞争

- Redis线程模型是怎么样的？为啥单线程却能支持高并发

  多个socket+IO多路复用程序+文件事件分派器+事件处理器（命令请求处理器，命令回复处理器，连接应答处理器）

  文件事件处理器（单线程），采用IO多路复用机制，同时监听多个socket，根据socket上的事件来选择对应的处理器，将命令压入队列中，事件分发器从队列中获取命令，根据命令将其分发到指定的事件处理器，处理完一个再处理下一个

  纯内存操作+非阻塞IO多路复用机制+单线程避免了多线程的频繁上下文切换

- Redis有哪些数据类型？分别可以在哪些数据场景下使用？

  string：普通的key-value值

  hash：数据结构

  

- Redis过期策略是怎么样的，项目中超时时间设置多久？



- 怎么保证Redis是高并发并且是高可用的？



- 怎么保证Redis挂掉后重启数据还可以恢复？

  持久化机制



- Redis集群模式是怎么样的



- 如何应对缓存雪崩和缓存穿透问题？

  redis高可用，主从+哨兵或者 redis cluster

  本地ehcache缓存+hystrix限流&降级，避免MySQL被打死

  redis持久化，快速恢复缓存数据



​		对值为空的数据在redis里构造缓存

- 如何处理数据库与缓存双写不一致问题？

  删缓存+更新数据

  高并发情况下，将删除，更新，读放入内存队列，异步串行化处理

- Redis并发竞争问题有没有碰到过，如何处理的？

  分布式锁去处理，确保同一时间，只能有一个系统实例去操作锁，每次写之前判断当前时间是否比缓存里的时间要新，如果更新，那么可以写，如果更旧，那么就不处理