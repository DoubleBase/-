# Zookeeper的应用场景

## 1.数据发布/订阅

发布者将数据发布到Zookeeper的一个或一系列节点上，供订阅者进行数据订阅，进而达到动态获取数据的目的，实现配置信息的集中式管理和数据的动态更新

有两种设计模式：推模式和拉模式

- 推模式：服务器主动将数据更新发送给所有订阅的客户端
- 拉模式：客户端主动发起请求获取最新数据，通过客户端都采用定时进行轮询拉取的方式。

Zookeeper采用推拉结合的方式：客户端向服务端注册自己需要关注的节点，一旦节点数据发生变更后，那么服务端会向相应的客户端发送Watcher事件通知，客户端接收到这个消息通知之后，需要主动到服务端获取最新的数据。

## 2.负载均衡

负载均衡是一种相当常见的计算机网络技术，用来对多个计算机、网络连接、CPU、磁盘驱动器或其他资源进行分配负载，以达到优化资源使用、最大化吞吐率、最小化响应时间和避免过载的目的。负载均衡通常分为硬件和软件负载

## 3.命名服务

Zookeeper可以通过创建顺序节点的方式来构造全局唯一的ID

## 4.分布式协调通知

分布式协调/通知服务是分布式系统中不可缺少的一个环节，是将不同分布式组件有机结合起来的关键所在。例如分布式事务的处理，机器间的互相协调等，引入这样一个协调者可以大大减少系统之间的耦合性，显著提高系统的可扩展性

Zookeeper中特有的Watcher注册和异步通知机制，可以很好的实现分布式环境下不同机器，甚至不同系统之间的协调与通知，从而实现对数据变更的实时处理，通常的做法是不同的客户端都对Zookeeper上同一个数据节点进行Watcher注册，监听数据节点的变化，如果数据节点发生变化，那么所有订阅的客户端能够接收到相应的Watcher通知，并做出相应的处理

- 心跳检测

  基于Zookeeper的临时节点特性，可以让不同的机器都在Zookeeper的一个指定节点下创建临时节点，不同的机器之间可以根据临时节点判断对应的客户端是否存活，通过这种方式，检测系统和被检测系统不需要直接相关联，而是通过Zookeeper上的某个节点进行关联，大大减少了系统耦合

- 工作进度汇报

  在Zookeeper上选择一个节点，每个任务客户端都在这个节点下创建临时节点，这样便可以实现两个功能：

  - 通过判断临时节点是否存在来确定任务机器是否存活
  - 每个任务机器会实时的将自己的任务执行进度写到这个临时节点上去，以便中心系统实时地获取到任务的执行进度

- 系统调度

  一个分布式系统由控制台和一些客户端系统两部分组成，控制台的职责就是需要将一些指令信息发送给所有客户端，以控制他们进行相应的业务逻辑。实际上就是修改Zookeeper上某些节点的数据，从而把这些数据变更以通知的形式发送给对应的订阅客户端

## 5.集群管理

所谓集群管理包括集群监控和集群控制，前者侧重集群运行状态的收集，后者则是对集群进行操作与控制

Zookeeper具备两大特性：

- 客户端如果对Zookeeper的一个数据节点注册Watcher监听，那么当该数据节点的内容或是其子节点列表发生变更时，Zookeeper服务器就会向订阅的客户端发送变更通知

- 对在Zookeeper上创建的临时节点，一旦客户端与服务端之间的会话失效，那么该临时节点也就被自动清除。

利用这两大特性，就可以实现另一种集群机器存活性监控的系统

### 分布式日志收集系统





## 6.Master选举





## 7.分布式锁





## 8.分布式队列





