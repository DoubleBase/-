## Zookeeper使用场景

### 分布式协调

A系统发送个请求到mq，然后B消费消息之后处理了，那A系统怎么知道B系统的处理结果呢，用Zookeeper就可以实现分布式系统之间的协调工作。A系统发送请求之后可以在Zookeeper上对某个节点的值注册个监听器，一旦B系统处理完了就修改Zookeeper那个节点的值，A立马就可以收到通知

![](/image/zookeeper的分布式协调场景.png)

### 分布式锁

对某一个数据连续发出两个修改操作，两台机器同时收到了请求，但是只能一台机器先执行另外一个机器再执行。那么此时就可以使用zk分布式锁，一个机器接收到了请求之后先获取zk上的一把分布式锁，就是可以去创建一个znode，接着执行操作；然后另外一个机器也尝试去创建那个znode，结果发现自己创建不了，因为被别人创建了。。。。那只能等着，等第一个机器执行完了自己再执行

![](/image/zookeeper的分布式锁场景.png)

### 元数据配置管理

zk可以用作很多系统的配置信息的管理，比如kafka、storm等等很多分布式系统都会选用zk来做一些元数据、配置信息的管理，包括dubbo注册中心不也支持zk么

![](/image/zookeeper的元数据_配置管理场景.png)

### HA高可用

这个应该是很常见的，比如hadoop、hdfs、yarn等很多大数据系统，都选择基于zk来开发HA高可用机制，就是一个重要进程一般会做主备两个，主进程挂了立马通过zk感知到切换到备用进程

![](/image/zookeeper的HA高可用性场景.png)