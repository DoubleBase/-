## 缓存+数据库读写模式

- cache aside pattern

  1. 读的时候，先读缓存，缓存没有的话，那么就读数据库，然后取出数据后放入缓存，同时返回响应
  2. 更新的时候，先删除缓存，然后再更新数据库

  为什么是删除缓存，而不是更新缓存？

  有的缓存是通过复杂计算得出来的结果，我们更新数据库字段的时候，去频繁计算更新缓存，但这个缓存却很少被访问，那么前面的计算都是不必要的

  例如，一个缓存涉及的表字段，在1分钟修改了20次，或者100次，那么缓存更新20次或100次，但这个缓存1分钟只被读了1次。

  实际上上述例子，只需计算一次即可，可以降低大幅度的开销

  每次数据过来，就只是删除缓存，然后修改数据库，如果这个缓存1分钟只是被访问1次，那么只有那一次是要被重新计算的，用缓存才去算缓存

  其实删除缓存，而不是更新缓存是一个lazy计算的思想，不是每次都重新做复杂的计算。不管会不会用到，而是让它需要被使用的时候再重新计算





